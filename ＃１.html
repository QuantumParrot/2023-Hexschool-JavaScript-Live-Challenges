<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一周目</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <p>BMI = 體重 (kg) / 身高2 (m2)</p>
    <p>過輕：BMI ＜ 18.5</p>
    <p>正常：18.5 ≦ BMI ＜ 24</p>
    <p>過重：24 ≦ BMI ＜ 27</p>
    <p>輕度肥胖：27 ≦ BMI ＜ 30</p>
    <p>中度肥胖：30 ≦ BMI ＜ 35</p>
    <p>重度肥胖：BMI ≧ 35</p>
    <hr>
    <p>還沒看洧杰老師的影片，自己實作，從頭到尾沒有複製程式碼</p>
    <ul>
        <li>第一階段：08 分 12 秒</li>
        <li>第二階段：10 分 35 秒</li>
        <li>第三階段：25 分 08 秒</li>
    </ul>
    <script>
    
    // ========== 第一階段 ========== //

    // printBmi(178, 20)
    // >> 印出 console.log 文字為「您的體重過輕」
    // printBmi(178, 70)
    // >> 印出 console.log 文字為「您的體重正常」
    // printBmi(178, 85)
    // >> 印出 console.log 文字為「您的體重過重」
    // printBmi(178, 90)
    // >> 印出 console.log 文字為「您的體重輕度肥胖」
    // printBmi(178, 110)
    // >> 印出 console.log 文字為「您的體重中度肥胖」
    // printBmi(178, 130)
    // >> 印出 console.log 文字為「您的體重重度肥胖」
    // printBmi("身高","體重")
    // >> 印出 console.log 文字為「您的數值輸入錯誤，請重新輸入」

    function printBmi(cm, kg) {

        if (isNaN(cm)||isNaN(kg)) {

            return "您的數值輸入錯誤，請重新輸入"
            
        } else {

            const bmi = (kg/(cm/100)**2).toFixed(2);
            
            if (bmi<18.5) {
                return "您的體重過輕"
            } else if (bmi<24) {
                return "您的體重正常"
            } else if (bmi<27) {
                return "您的體重過重"
            } else if (bmi<30) {
                return "您的體重輕度肥胖"
            } else if (bmi<35) {
                return "您的體重中度肥胖"
            } else if (bmi>=35) {
                return "您的體重重度肥胖"
            }

        }

    }

    /// ========== 第二階段 ========== //

    // printBmi(178, 20)
    // >> 印出 console.log 文字為「您的體重過輕，健康指數為藍色」
    // printBmi(178, 70)
    // >> 印出 console.log 文字為「您的體重正常，健康指數為紅色」
    // printBmi(178, 85)
    // >> 印出 console.log 文字為「您的體重過重，健康指數為澄色」
    // printBmi(178, 90)
    // >> 印出 console.log 文字為「您的體重輕度肥胖，健康指數為黃色」
    // printBmi(178, 110)
    // >> 印出 console.log 文字為「您的體重中度肥胖，健康指數為黑色」
    // printBmi(178, 130)
    // >> 印出 console.log 文字為「您的體重重度肥胖，健康指數為綠色」
    // printBmi("身高","體重")
    // >> 印出 console.log 文字為「您的數值輸入錯誤，請重新輸入」

    const bmiStatesData = {
        "overThin": {
            "state": "過輕",
            "color": "藍色"
        },
        "normal": {
            "state": "正常",
            "color": "紅色"
        },
        "overWeight": {
            "state": "過重",
            "color": "澄色"
        },
        "mildFat": {
            "state": "輕度肥胖",
            "color": "黃色"
        },
        "moderateFat": {
            "state": "中度肥胖",
            "color": "黑色"
        },
        "severeFat": {
            "state": "重度肥胖",
            "color": "綠色"
        },
    }

    function printBmi(cm, kg) {

        if (isNaN(cm)||isNaN(kg)) {

            return "您的數值輸入錯誤，請重新輸入"

        } else {

            const bmi = ((kg)/(cm/100)**2).toFixed(2);
            const { overThin, normal, overWeight, mildFat, moderateFat, severeFat } = bmiStatesData;

            if (bmi<18.5) {
                return `您的體重${overThin.state}，健康指數為${overThin.color}`
            } else if (bmi<24) {
                return `您的體重${normal.state}，健康指數為${normal.color}`
            } else if (bmi<27) {
                return `您的體重${overWeight.state}，健康指數為${overWeight.color}`
            } else if (bmi<30) {
                return `您的體重${mildFat.state}，健康指數為${mildFat.color}`
            } else if (bmi<35) {
                return `您的體重${moderateFat.state}，健康指數為${moderateFat.color}`
            } else if (bmi>=35) {
                return `您的體重${severeFat.state}，健康指數為${severeFat.color}`
            }

        }

    }

    // ========== 第三階段 ========== //

    // 儲存每筆計算資料，多一個變數為 bmiHistoryData 並賦予空陣列來儲存計算物件資料
    // 若數值輸入錯誤則不儲存。

    // printBmi(178, 20)
    // >> 印出 console.log 文字為「您的體重過輕，健康指數為藍色」
    // printBmi(178, 70)
    // >> 印出 console.log 文字為「您的體重正常，健康指數為紅色」
    // printBmi(178, 85)
    // >> 印出 console.log 文字為「您的體重過重，健康指數為澄色」
    // showHistoryData()
    // >> 印出 console.log 文字為「您總共計算 3 次 BMI 紀錄，最後一次 BMI 指數為 26.83，體重過重！健康指數為澄色！」

    const bmiHistoryData = [];

    function printBmi(cm, kg) {

        if (isNaN(cm)||isNaN(kg)) {

            return "您的數值輸入錯誤，請重新輸入"

        } else {

            const bmi = (kg/Math.pow(cm/100,2)).toFixed(2);
            
            if (bmi<18.5) {
                const { overThin } = bmiStatesData;
                bmiHistoryData.push({...overThin, bmi});
                return `您的體重${overThin.state}，健康指數為${overThin.color}`
            } else if (bmi<24) {
                const { normal } = bmiStatesData;
                bmiHistoryData.push({...normal, bmi});
                return `您的體重${normal.state}，健康指數為${normal.color}`
            } else if (bmi<27) {
                const { overWeight } = bmiStatesData;
                bmiHistoryData.push({...overWeight, bmi});
                return `您的體重${overWeight.state}，健康指數為${overWeight.color}`
            } else if (bmi<30) {
                const { mildFat } = bmiStatesData; 
                bmiHistoryData.push({...mildFat, bmi});
                return `您的體重${mildFat.state}，健康指數為${mildFat.color}`
            } else if (bmi<35) {
                const { moderateFat } = bmiStatesData;
                bmiHistoryData.push({...moderateFat, bmi});
                return `您的體重${moderateFat.state}，健康指數為${moderateFat.color}`
            } else if (bmi>=35) {
                const { severeFat } = bmiStatesData;
                bmiHistoryData.push({...severeFat, bmi});
                return `您的體重${severeFat.state}，健康指數為${severeFat.color}`
            }
        
        }

    }

    function showHistoryData() {
        const length = bmiHistoryData.length;
        console.log(`
        您總共計算 ${length} 次 BMI 紀錄，
        最後一次 BMI 指數為 ${bmiHistoryData[length-1].bmi}
        體重${bmiHistoryData[length-1].state}！
        健康指數為${bmiHistoryData[length-1].color}！`)
    }

    console.log(printBmi(178, 20));
    console.log(printBmi(178, 70));
    console.log(printBmi(178, 85));

    showHistoryData();
    
    </script>
</body>
</html>